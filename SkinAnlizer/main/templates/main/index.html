<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Upload a file in Django 1.5 using Dropzone.js</title>
    {% load static %}
    <link rel="stylesheet" type="text/css" href="{% static 'main/css/dropzone.css' %}" />
</head>

<body>

    <!-- IMPORTANT enctype attribute! -->
    <form class="dropzone" id="myDropzone" action="{% url 'main:index' %}" method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="fallback">
            <input name="file" type="file" />
        </div>
    </form>
    <button id="submit-all">
            Submit all files
    </button>

    <button id="remove-all">
            Remove all files
    </button>

    <script src="{% static 'main/js/dropzone.js' %}"></script>
    <script src="{% static 'main/js/jquery-3.1.1.min.js' %}"></script>

    <script type="text/javascript">
        Dropzone.autoDiscover = false;
        Dropzone.options.myDropzone = {
            paramName: "file",
            // Prevents Dropzone from uploading dropped files immediately
            autoProcessQueue: false,
            init: function() {
                var submitButton = document.querySelector("#submit-all");
                var removeButton = document.querySelector("#remove-all");
                myDropzone = this;

                submitButton.addEventListener("click", function() {
                    console.log("add files")
                    myDropzone.processQueue();
                    // Tell Dropzone to process all queued files.
                });
                removeButton.addEventListener("click", function() {
                    console.log("remove files");
                    var myFiles = myDropzone.files.getUploadingFiles();
                    console.log(myFiles);
                    for (var file in myFiles) {
                        myDropzone.removeFile(file);
                    }
                });

                // You might want to show the submit button only when
                // files are dropped here:
                this.on("addedfile", function() {
                    // Show submit button here and/or inform user to click it.
                    alert("Added file.");
                });

            }
        };
    </script>
</body>

</html>